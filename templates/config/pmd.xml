<project
    name="PMD">

    <path id="classpath">
        <fileset dir="{{ project_path }}/lib">
            <include name="*.jar" />
        </fileset>
    </path>

    <taskdef name="pmd" classname="net.sourceforge.pmd.ant.PMDTask" classpathref="classpath" />

    <target name="pmd">
        <pmd rulesetfiles="{{ ruleset }}">
            <sourceLanguage name="{{ language }}" version="{{ version }}" />

            <formatter type="xml" toFile="{{ target }}" />

            <fileset dir="{{ base_path }}">
                {% for file in files %}
                    <include name="{{ file }}" />
                {% endfor %}
            </fileset>
        </pmd>
    </target>

</project>
